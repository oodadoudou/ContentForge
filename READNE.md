# 歡迎使用 ContentForge

**ContentForge** 是一個強大的、模組化的內容處理工具集，旨在自動化從內容獲取、處理、格式轉換到最終歸檔的全套流程。無論您是想備份已購買的網路漫畫、製作電子書，還是整理混亂的下載資料夾，ContentForge 都提供了一站式的解決方案。

本專案透過一個互動式的命令列介面 (CLI) 運作，將複雜的操作簡化為清晰的選單選項。

---

## 核心功能

* **內容獲取**: 自動從特定網站 (Bomtoon.tw) 下載您已購買的漫畫資源。
* **漫畫處理**: 提供多種智慧型流水線，將零散的漫畫圖片批量轉換為適合閱讀和儲存的、最佳化過的 PDF 檔案。
* **電子書工坊**: 全功能的電子書處理中心，支援從 TXT/Markdown 創建 EPUB/HTML，以及對現有 EPUB 檔案進行內容替換、樣式美化、格式轉換和分割。
* **檔案修復**: 針對常見的文件問題（如 TXT 亂碼、EPUB 封面不顯示、豎排版式）提供一鍵修復功能。
* **檔案庫管理**: 自動整理雜亂的檔案，透過 AI 翻譯（需設定）對資料夾進行智慧重命名，並新增拼音首字母以便排序歸檔。

---

## 首次使用設定

在第一次執行本專案前，請依照以下步驟完成設定：

### 1. 安裝依賴套件

本專案依賴於 `requirements.txt` 中列出的 Python 套件。

* **自動安裝 (推薦)**:
    1.  在您的終端機中，導覽至專案的根目錄。
    2.  執行主程式：`python main.py`
    3.  在主選單中，選擇 `6. 系統設定與依賴`。
    4.  接著選擇 `3. 安裝/更新專案依賴 (pip)`，程式將會自動安裝所有必要的套件。

* **手動安裝**:
    在您的終端機中，導覽至專案的根目錄，然後執行以下指令：
    ```bash
    pip install -r requirements.txt
    ```

### 2. 設定預設工作目錄

首次執行 `python main.py` 時，程式會自動檢測到您是第一次使用，並引導您設定一個**預設工作目錄**。

* **作用**: 這個目錄將作為所有模組在需要讀取或儲存檔案時的預設路徑，避免您每次都要輸入完整的路徑。
* **建議**: 您可以將其設定為您常用的下載資料夾或工作區，例如 `D:\Downloads` 或 `/Users/YourName/Documents`。

您之後隨時可以在 `主選單 -> 6. 系統設定與依賴 -> 1. 設定預設工作目錄` 中修改此設定。

### 3. (選擇性) 設定 AI 翻譯功能

如果您需要使用 **模組五：檔案庫管理** 中的資料夾名稱自動翻譯功能，您需要設定 AI 的 API 金鑰。

* **設定位置**: `主選單 -> 6. 系統設定與依賴 -> 2. 設定 AI 翻譯 API`
* **必要資訊**:
    * `API Key`: 您的 API 服務金鑰。
    * `Base URL`: API 的請求位址。
    * `Model Name`: 您想使用的模型名稱。

所有設定將會被保存在專案根目錄下的 `shared_assets/settings.json` 檔案中。

---

## 如何執行

1.  確保您已完成首次設定。
2.  在終端機中，導覽至專案根目錄。
3.  執行以下指令啟動程式：
    ```bash
    python main.py
    ```
4.  根據主選單的提示，輸入數字以進入您想使用的功能模組。

---

## 模組功能詳解

### 模組一：內容獲取 (01_acquisition)

* **簡介**: 從 Bomtoon.tw 平台下載您已購買的漫畫。
* **準備工作**:
    * **自動更新憑證 (推薦)**: 在模組選單中選擇 `[自動更新] 更新/生成登入憑證`，程式會自動嘗試從本機的 Chrome 瀏覽器獲取。
    * **手動設定**: 如果自動更新失敗，請依照模組內 README 的指示，手動獲取 `Session Token` 和 `Bearer Token` 並填入 `01_acquisition/bomtoontw-session` 檔案中。
* **核心功能**: 提供下載已購漫畫、搜尋漫畫、列出章節、下載指定章節或整本漫畫等功能。

### 模組二：漫畫處理流程 (02_comic_processing)

* **簡介**: 提供自動化的圖片處理流水線，將包含序列圖片的資料夾批量轉換為最佳化的 PDF 檔案。
* **核心功能**:
    * **智慧流程 (v2)**: `合併長圖 -> 智慧分割 -> 按大小重打包 -> 生成PDF`。能智慧地去除拼接白邊/黑邊，並將內容打包成大小適中的圖片塊，適合網路傳輸和閱讀。
    * **舊版流程 (v1.2)**: 提供另一種處理邏輯，可作為備用方案。
    * **快速轉換**: 直接將圖片資料夾轉換為 PDF，無任何最佳化。

### 模組三：電子書工坊 (03_ebook_workshop)

* **簡介**: 您的電子書「創作中心」，提供一系列強大的工具，用於從零創建、編輯、分割和美化電子書。
* **核心功能**:
    * **創建**: 從 TXT 檔案智慧生成帶有章節目錄的 EPUB；將 Markdown 資料夾批量轉換為帶有精美樣式的 HTML。
    * **轉換**: 從 EPUB 中提取純文字內容。
    * **編輯與修復**: 批量重命名 EPUB、將內文轉為簡體中文、修復豎排版式。
    * **高級工具**: 根據自訂規則批量替換 EPUB/TXT 內容、用統一的 CSS 樣式美化 EPUB、按章節數量均等分割 EPUB 檔案。

### 模組四：檔案修復與格式化 (04_file_repair)

* **簡介**: 一個「檔案修理站」，專門用於修復和標準化那些格式不規範或有常見問題的檔案。
* **核心功能**:
    * **EPUB 綜合修復**: 智慧檢測並按需修復 EPUB 的「豎排版式」和「繁體中文內容」。
    * **EPUB 封面修復**: 專門修復在 Kindle 等裝置上無法正常顯示封面的 EPUB 檔案。
    * **TXT 亂碼修復**: 自動檢測並修復 TXT 檔案的編碼問題。
    * **TXT 斷行修復**: 修正由 PDF 轉換來的 TXT 中常見的錯誤斷行問題。

### 模組五：檔案庫管理 (05_library_organization)

* **簡介**: 提供強大的自動化工具，對您本地的檔案和資料夾進行整理、翻譯、重命名和歸檔。
* **核心功能**:
    * **智慧整理與翻譯**: 自動將根目錄下的散亂檔案根據檔名分組並移入子資料夾，接著呼叫 AI API 將資料夾名稱翻譯為中文，最後新增拼音首字母前綴以便排序。
    * **歸檔已處理資料夾**: 將一個目錄下所有符合特定名稱的資料夾，一次性移動到另一個指定的歸檔目錄。
