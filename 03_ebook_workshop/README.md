============================================================
模块三: 电子书工坊 (03_ebook_workshop)
【简介】
本模块是您的电子书“创作中心”，提供了一系列强大的工具，用于
从零创建、编辑、分割和美化电子书（EPUB/TXT/HTML）文件。

【使用方法】
本模块的所有功能都已整合到主菜单中。

在终端中，运行 python main.py。

在主菜单选择 "3. 电子书处理与生成 (TXT/EPUB/HTML)"。

根据子菜单的提示选择您需要的功能。

--------------------- 功能与用法详解 ---------------------

--- 创建与转换 ---
1. [创建] 从 TXT 创建带章节目录的 EPUB

对应脚本: txt_to_epub_convertor.py

功能: 能够智能地将一个纯文本（TXT）文件转换为一个带有封面、章节目录、可自定义样式的标准 EPUB 电子书。

准备工作: 为了让脚本能正确识别目录，您需要使用特定格式来标记章节标题。脚本默认的规则是：

一级标题: 以 # 标题 的形式 (例如: # 第1章)

二级标题: 以 ## 标题 的形式 (例如: ## 1.1 小节)
【注意】: # 或 ## 必须位于一行的开头。

2. [创建] 将 Markdown 文件夹批量转为 HTML

对应脚本: convert_md_to_html.py

功能: 将指定目录下的所有 Markdown (.md) 文件，批量转换为带有美观样式和代码高亮的、自包含的 HTML 文件。

3. [转换] 从 EPUB 提取纯文本内容 (TXT)

对应脚本: epub_to_txt_convertor.py

功能: 将 EPUB 文件中的所有章节内容提取出来，合并成一个单一的、干净的 TXT 文件，便于存档或二次编辑。

--- 编辑与修复 EPUB ---
4. (元数据) 批量重命名 EPUB 文件

对应脚本: epub_rename.py

区别与用途: 此工具只修改文件名，不改变 EPUB 内部的任何内容。它会读取 EPUB 文件内部的元数据标题，然后让您选择：

手动输入新标题：为您选定的文件设置一个全新的文件名。

自动规整：直接使用书内原有的标题，清理掉特殊字符，生成一个干净、标准的文件名。

适用场景: 当你的 EPUB 文件名是 123.epub 或 download.epub 这种无意义的名称时，用它来快速整理文件名。

5. (内容) 仅将 EPUB 内文转为简体中文

对应脚本: epub_convert_tc_to_sc.py

区别与用途: 这是一个单一功能的转换工具。它只会将 EPUB 文件内的所有文本内容从繁体中文转换为简体中文。

适用场景: 当你拿到一个排版已经很完美的繁体中文 EPUB，并且你只想进行文字简繁转换，不希望触碰任何排版和格式时使用。

6. (综合) 修复竖排版并转为简体中文 (⭐推荐)

对应脚本: epub_reformat_and_convert_v2.py

区别与用途: 这是一个智能的、多合一的处理工具。它会自动检测 EPUB 文件是否存在以下两种问题，然后按需进行修复：

版式问题: 检测是否存在从右向左翻页的“竖排版”格式，并将其修正为通用的从左向右翻页的“横排版”。

文字问题: 检测内容是否为繁体中文，并将其转换为简体。

适用场景: 这是最常用、最推荐的修复选项。当你拿到一个从日本或台湾网站下载的、不确定其内部格式的 EPUB 文件时，直接使用此功能，它能一步到位解决最常见的两大格式问题。

7. (内容) 批量移除 EPUB 封面

对应脚本: epub_cover_remover.py

区别与用途: 此工具会彻底移除 EPUB 文件中的封面。它不仅会删除封面图片（如 cover.jpg），还会一并删除包含该图片的 XHTML 页面（如 cover.xhtml），并清理掉相关的元数据、清单（manifest）和书脊（spine）条目，确保文件结构的干净与完整。

适用场景: 当您需要减小文件体积，或不希望在阅读器中看到书籍自带的、多余的封面页（尤其是一些阅读器会自动生成缩略图）时使用。

--- 高级工具 ---
8. 根据规则批量替换 EPUB/TXT 内容

对应脚本: batch_replacer.py

功能: 根据您预先定义的规则，批量替换指定目录内所有 EPUB 和 TXT 文件中的文本内容，并生成高亮对比报告。

准备工作:

在 shared_assets 文件夹中找到 rules.txt 模板文件。

将其【复制】到您将要处理的电子书所在的目录。

根据您的需求，修改该目录下的 rules.txt 文件。

9. 用统一的 CSS 样式美化 EPUB

对应脚本: epub_styler.py

功能: 使用项目 shared_assets 文件夹中的 new_style.css 文件，一键统一替换指定目录内所有 EPUB 文件的内部样式，实现风格的统一。

10. 按章节数量均等分割 EPUB 文件

对应脚本: split_epub.py

功能: 将一个大型的 EPUB 文件，按您指定的卷数（parts）平均分割成多个独立的小卷。

11. 合并文件夹内所有 EPUB

对应脚本: epub_merge.py

功能: 将指定文件夹内的所有 EPUB 文件，按文件名顺序合并成一个单一的、带有层级目录的 EPUB 文件。合并后的书籍将以第一本书的封面作为主封面。

适用场景: 当您想将一个系列的书籍（如：第一卷、第二卷、第三卷）合并成一部完整的选集，以便于阅读和管理时使用。

12. [工具] 解包/打包 EPUB

对应脚本: epub_toolkit.py

功能: 提供两个功能：1. 将EPUB文件解包成一个包含其所有内部文件（HTML, CSS, 图片等）的文件夹。2. 将一个符合EPUB结构的文件夹重新打包成一个EPUB文件。

适用场景: 当你需要手动编辑EPUB的内部文件，例如修改HTML结构、替换图片或调整CSS，但又不想使用重量级的EPUB编辑软件时，这个工具非常有用。