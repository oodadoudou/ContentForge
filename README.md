# 欢迎使用 ContentForge

**ContentForge** 是一个强大的、模块化的内容处理工具集，旨在自动化从内容获取、处理、格式转换到最终归档的全套流程。无论您是想备份已购买的网络漫画、制作电子书，还是整理混乱的下载文件夹，ContentForge 都提供了一站式的解决方案。

本专案通过一个交互式的命令行界面 (CLI) 运作，将复杂的操作简化为清晰的菜单选项。

-----

## 核心功能

  * **内容获取**: 自动从特定网站,下载您已购买的漫画资源。
  * **漫画处理**: 提供多种智能型流水线，将零散的漫画图片批量转换为适合阅读和储存的、优化过的 PDF 文件。
  * **电子书工坊**: 全功能的电子书处理中心，支持从 TXT/Markdown 创建 EPUB/HTML，以及对现有 EPUB 文件进行内容替换、样式美化、格式转换和分割。
  * **文件修复**: 针对常见的文件问题（如 TXT 乱码、EPUB 封面不显示、竖排版式）提供一键修复功能。
  * **文件库管理**: 自动整理杂乱的文件，通过 AI 翻译（需设定）对文件夹进行智能重命名，并新增拼音首字母以便排序归档。

-----

## 首次使用设置

在第一次执行本专案前，请依照以下步骤完成设置：

### 1\. 安装依赖套件

本专案依赖于 `requirements.txt` 中列出的 Python 套件。

  * **自动安装 (推荐)**:

    1.  在您的终端机中，导航至专案的根目录。
    2.  执行主程序：`python main.py`
    3.  在主菜单中，选择 `6. 系统设置与依赖`。
    4.  接着选择 `3. 安装/更新专案依赖 (pip)`，程序将会自动安装所有必要的套件。

  * **手动安装**:
    在您的终端机中，导航至专案的根目录，然后执行以下指令：

    ```bash
    pip install -r requirements.txt
    ```

### 2\. 设置预设工作目录

首次执行 `python main.py` 时，程序会自动检测到您是第一次使用，并引导您设置一个**预设工作目录**。

  * **作用**: 这个目录将作为所有模块在需要读取或保存文件时的预设路径，避免您每次都要输入完整的路径。
  * **建议**: 您可以将其设置为您常用的下载文件夹或工作区，例如 `D:\Downloads` 或 `/Users/YourName/Documents`。

您之后随时可以在 `主菜单 -> 6. 系统设置与依赖 -> 1. 设置预设工作目录` 中修改此设置。

### 3\. (选择性) 设置 AI 翻译功能

如果您需要使用 **模块五：文件库管理** 中的文件夹名称自动翻译功能，您需要设置 AI 的 API 金钥。

  * **设置位置**: `主菜单 -> 6. 系统设置与依赖 -> 2. 设置 AI 翻译 API`
  * **必要信息**:
      * `API Key`: 您的 API 服务金钥。
      * `Base URL`: API 的请求地址。
      * `Model Name`: 您想使用的模型名称。

所有设置将会被保存在专案根目录下的 `shared_assets/settings.json` 文件中。

-----

## 如何执行

1.  确保您已完成首次设置。
2.  在终端机中，导航至专案根目录。
3.  执行以下指令启动程序：
    ```bash
    python main.py
    ```
4.  根据主菜单的提示，输入数字以进入您想使用的功能模块。

-----

## 模块功能详解

### 模块一：内容获取 (01\_acquisition)

  * **简介**: 从 Bomtoon.tw 平台下载您已购买的漫画。
  * **准备工作**:
      * **自动更新凭证 (推荐)**: 在模块菜单中选择 `[自动更新] 更新/生成登录凭证`，程序会自动尝试从本机的 Chrome 浏览器获取。
      * **手动设置**: 如果自动更新失败，请依照模块内 README 的指示，手动获取 `Session Token` 和 `Bearer Token` 并填入 `01_acquisition/bomtoontw-session` 文件中。
  * **核心功能**: 提供下载已购漫画、搜寻漫画、列出章节、下载指定章节或整本漫画等功能。

### 模块二：漫画处理流程 (02\_comic\_processing)

  * **简介**: 提供自动化的图片处理流水线，将包含序列图片的文件夹批量转换为优化的 PDF 文件。
  * **核心功能**:
      * **智能流程 (v2)**: `合并长图 -> 智能分割 -> 按大小重打包 -> 生成PDF`。能智能地去除拼接白边/黑边，并将内容打包成大小适中的图片块，适合网络传输和阅读。
      * **旧版流程 (v1.2)**: 提供另一种处理逻辑，可作为备用方案。
      * **快速转换**: 直接将图片文件夹转换为 PDF，无任何优化。

### 模块三：电子书工坊 (03\_ebook\_workshop)

  * **简介**: 您的电子书「创作中心」，提供一系列强大的工具，用于从零创建、编辑、分割和美化电子书。
  * **核心功能**:
      * **创建**: 从 TXT 文件智能生成带有章节目录的 EPUB；将 Markdown 文件夹批量转换为带有精美样式的 HTML。
      * **转换**: 从 EPUB 中提取纯文本内容。
      * **编辑与修复**: 批量重命名 EPUB、将内文转为简体中文、修复竖排版式。
      * **高级工具**: 根据自订规则批量替换 EPUB/TXT 内容、用统一的 CSS 样式美化 EPUB、按章节数量均等分割 EPUB 文件。

### 模块四：文件修复与格式化 (04\_file\_repair)

  * **简介**: 一个「文件修理站」，专门用于修复和标准化那些格式不规范或有常见问题的文件。
  * **核心功能**:
      * **EPUB 综合修复**: 智能检测并按需修复 EPUB 的「竖排版式」和「繁体中文内容」。
      * **EPUB 封面修复**: 专门修复在 Kindle 等设备上无法正常显示封面的 EPUB 文件。
      * **TXT 乱码修复**: 自动检测并修复 TXT 文件的编码问题。
      * **TXT 断行修复**: 修正由 PDF 转换来的 TXT 中常见的错误断行问题。

### 模块五：文件库管理 (05\_library\_organization)

  * **简介**: 提供强大的自动化工具，对您本地的文件和文件夹进行整理、翻译、重命名和归档。
  * **核心功能**:
      * **智能整理与翻译**: 自动将根目录下的散乱文件根据文件名分组并移入子文件夹，接着调用 AI API 将文件夹名称翻译为中文，最后新增拼音首字母前缀以便排序。
      * **归档已处理文件夹**: 将一个目录下所有符合特定名称的文件夹，一次性移动到另一个指定的归档目录。

### 模块六：系统设置与依赖

  * **简介**: 配置工具的核心参数和管理环境。
  * **核心功能**:
      * **配置预设工作目录**: 设置所有模块读取和保存文件的预设位置。
      * **配置 AI 翻译 API**: 设置用于文件夹名称翻译功能的 API 金钥、URL 和模型。
      * **安装/更新专案依赖**: 自动安装 `requirements.txt` 中列出的所有 Python 套件。